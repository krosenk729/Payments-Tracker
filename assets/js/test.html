<!DOCTYPE html>
<html>
<head>
	<title>Login</title>
	<meta charset="utf-8">
</head>
<body>
	<div style="margin: 0 auto;">
		<button>Let's Make Magic</button>
	</div>
<code>
	18:42:16.576 Object { J: [], m: "AIzaSyBnmTvL6c9A1SGYnyQY683TbSp5u9Rd-Zc", w: "[DEFAULT]", B: "friendlychat-8d7a5.firebaseapp.com", g: {…}, na: {…}, ie: "eyJhbGciOiJSUzI1NiIsImtpZCI6ImYzOGEzNTQ4ODNlNDUzNzQzNjRhYTgxY2FlNjI2NzkyYTIwNzkwYTkifQ.eyJpc3MiOiJodHRwczovL3NlY3VyZXRva2VuLmdvb2dsZS5jb20vZnJpZW5kbHljaGF0LThkN2E1IiwibmFtZSI6IkthdGhlcmluZSBSb3NlbmtyYW50eiIsInBpY3R1cmUiOiJodHRwczovL2xoMy5nb29nbGV1c2VyY29udGVudC5jb20vLVhkVUlxZE1rQ1dBL0FBQUFBQUFBQUFJL0FBQUFBQUFBQUFBLzQyNTJyc2NidjVNL3Bob3RvLmpwZyIsImF1ZCI6ImZyaWVuZGx5Y2hhdC04ZDdhNSIsImF1dGhfdGltZSI6MTUxNTg3NjE2NSwidXNlcl9pZCI6Im13R0ljRUJVNkVSZEF3ZWZOcmgyTnNzakJyRTMiLCJzdWIiOiJtd0dJY0VCVTZFUmRBd2VmTnJoMk5zc2pCckUzIiwiaWF0IjoxNTE1ODg2MDY2LCJleHAiOjE1MTU4ODk2NjYsImVtYWlsIjoia2F0aGVyaW5lQG5pbmVsYWJzLmNvbSIsImVtYWlsX3ZlcmlmaWVkIjp0cnVlLCJmaXJlYmFzZSI6eyJpZGVudGl0aWVzIjp7Imdvb2dsZS5jb20iOlsiMTAxNTIxMDI2OTMyMTgwNTExNjg4Il0sImVtYWlsIjpbImthdGhlcmluZUBuaW5lbGFicy5jb20iXX0sInNpZ25faW5fcHJvdmlkZXIiOiJnb29nbGUuY29tIn19.SvnQoW_WmvDxgJ1DaDvF-_GRUCFuyHOE-H79hoVQHNkln9uRVZC7cN1C7eyd7MbbQ2uVdP-qRMczxhdWI0pQ8PqjnPLgy6y7MyVJrnxWs5si5yTbqi7iInXf9bW6DU7PwZzV-PtcFAXFBrqMg3WXCKBa_1KnYQ7wNwWDMVuhu-w0fj1zROPLOtXeqzk7ui6QAFzsCkBEJpw5lJbbnwPPomQFSkszC6kGCuWcppZLqvaob0j42T7rn8GYs4ano39NPHSaodgryvIhZGOvAkJe5A2Rxkekbynhc9yfMRUTlhzxgcJQoHKIIGfZkYL44ZrpjnDMxgO3z98dhy9WtqcT8g", _lat: "eyJhbGciOiJSUzI1NiIsImtpZCI6ImYzOGEzNTQ4ODNlNDUzNzQzNjRhYTgxY2FlNjI2NzkyYTIwNzkwYTkifQ.eyJpc3MiOiJodHRwczovL3NlY3VyZXRva2VuLmdvb2dsZS5jb20vZnJpZW5kbHljaGF0LThkN2E1IiwibmFtZSI6IkthdGhlcmluZSBSb3NlbmtyYW50eiIsInBpY3R1cmUiOiJodHRwczovL2xoMy5nb29nbGV1c2VyY29udGVudC5jb20vLVhkVUlxZE1rQ1dBL0FBQUFBQUFBQUFJL0FBQUFBQUFBQUFBLzQyNTJyc2NidjVNL3Bob3RvLmpwZyIsImF1ZCI6ImZyaWVuZGx5Y2hhdC04ZDdhNSIsImF1dGhfdGltZSI6MTUxNTg3NjE2NSwidXNlcl9pZCI6Im13R0ljRUJVNkVSZEF3ZWZOcmgyTnNzakJyRTMiLCJzdWIiOiJtd0dJY0VCVTZFUmRBd2VmTnJoMk5zc2pCckUzIiwiaWF0IjoxNTE1ODg2MDY2LCJleHAiOjE1MTU4ODk2NjYsImVtYWlsIjoia2F0aGVyaW5lQG5pbmVsYWJzLmNvbSIsImVtYWlsX3ZlcmlmaWVkIjp0cnVlLCJmaXJlYmFzZSI6eyJpZGVudGl0aWVzIjp7Imdvb2dsZS5jb20iOlsiMTAxNTIxMDI2OTMyMTgwNTExNjg4Il0sImVtYWlsIjpbImthdGhlcmluZUBuaW5lbGFicy5jb20iXX0sInNpZ25faW5fcHJvdmlkZXIiOiJnb29nbGUuY29tIn19.SvnQoW_WmvDxgJ1DaDvF-_GRUCFuyHOE-H79hoVQHNkln9uRVZC7cN1C7eyd7MbbQ2uVdP-qRMczxhdWI0pQ8PqjnPLgy6y7MyVJrnxWs5si5yTbqi7iInXf9bW6DU7PwZzV-PtcFAXFBrqMg3WXCKBa_1KnYQ7wNwWDMVuhu-w0fj1zROPLOtXeqzk7ui6QAFzsCkBEJpw5lJbbnwPPomQFSkszC6kGCuWcppZLqvaob0j42T7rn8GYs4ano39NPHSaodgryvIhZGOvAkJe5A2Rxkekbynhc9yfMRUTlhzxgcJQoHKIIGfZkYL44ZrpjnDMxgO3z98dhy9WtqcT8g", refreshToken: "AEoYo8sWBQfiNFTBxSOfTgqmCgWqsm8RljMV4pnp9zRlGi1Ie7fffeMcLOBjHC5QOJCkkNkYqMCDH2N056bte3IkSDNFDeEMEJtXoclswH4anrr_htUQsOTIGb14N4kUcT6O1m0DNXHEigFgKC5EKkGBxg0mJVYb4bsIq6Rbs6r_rQkTRZ07YF4EMtSTTyxZ5E1CA-bEZ8PwfZPO3CPV6fD4Kaoy0KMP0brSZic7lnf7tqmbVKv6qTcrEs80iMbNjET4gomsiISW3hkfhBWLLzgzzlKPfGqKy8030EySlLV_SzPLCgwyY9hrBYmjcInALYhRsVG7gf-KqKfq97_uR9g8Uhe-8wzXhW904wgH-ymELk7xS2pgaolg2S_r4Rrz737mGJtfsY1F", uid: "mwGIcEBU6ERdAwefNrh2NssjBrE3", … } 

</code>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<script src="https://www.gstatic.com/firebasejs/4.8.2/firebase.js"></script>
<script src="https://www.gstatic.com/firebasejs/4.8.2/firebase-auth.js"></script>
<script>
  // Initialize Firebase
  var config = {
    apiKey: "AIzaSyD6FBfO14EljQNaKSud9lHWlsasUita6uY",
    authDomain: "recurring-payments-tracker.firebaseapp.com",
    databaseURL: "https://recurring-payments-tracker.firebaseio.com",
    projectId: "recurring-payments-tracker",
    storageBucket: "recurring-payments-tracker.appspot.com",
    messagingSenderId: "428623070633"
  };
  firebase.initializeApp(config);
  var provider = new firebase.auth.GoogleAuthProvider();
  // provider.addScope('https://www.googleapis.com/auth/contacts.readonly');

  $('button').click(doSomeStuff);

  function doSomeStuff() {
  	firebase.auth().signInWithPopup(provider).then(function(result) {
	  // This gives you a Google Access Token. You can use it to access the Google API.
	  var token = result.credential.accessToken;
	  // The signed-in user info.
	  var user = result.user;
	  console.log('promise from provider ran', result);
	}).catch(function(error) {
	  // Handle Errors here.
	  var errorCode = error.code;
	  var errorMessage = error.message;
	  // The email of the user's account used.
	  var email = error.email;
	  // The firebase.auth.AuthCredential type that was used.
	  var credential = error.credential;
	  
	  console.log('error', error);
	});
  }

  firebase.auth().onAuthStateChanged(function(user) {
	  if (user) {
	    console.log('User is signed in.', user);
	    firebase.database().ref('test/users').child(uid).update({
	    	name: user.displayname,
	    	img: user.photoURL,
	    	id: user.uid 
	    });
	  } else {
	    // No user is signed in.
	  }
	});


  var monitorpath = '';
  function monitorThis(monitorpath = ''){
  	firebase.database().ref().off();
  	firebase.database().ref(monitorpath).on('value', function(data){
  		console.log('on value happened', data);
  	});
  }
  monitorThis();

</script>
</body>
</html>